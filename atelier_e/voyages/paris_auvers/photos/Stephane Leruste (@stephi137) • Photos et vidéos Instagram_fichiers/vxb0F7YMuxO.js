;/*FB_PKG_DELIM*/

__d("PolarisFeedRoot.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{}}},root:c("JSResourceForInteraction")("PolarisFeedRoot.react").__setRef("PolarisFeedRoot.entrypoint")};g["default"]=a}),98);
__d("PolarisFeedPageContainerDeferred",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("PolarisFeedPageContainer.react").__setRef("PolarisFeedPageContainerDeferred"));b=a;g["default"]=b}),98);
__d("usePolarisInitFeedPage",["PolarisFeedActionInitFeed","PolarisFeedSeenStateManagerSingleton","PolarisHoldoutChecks","PolarisReactRedux","justknobx","react","usePolarisQueryPreloaderID","usePolarisQueryStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a,b){var e=d("PolarisReactRedux").useDispatch(),f=c("usePolarisQueryStore")(),g=c("usePolarisQueryPreloaderID")(a),h=c("usePolarisQueryPreloaderID")(b);return i(function(){var i=c("PolarisFeedSeenStateManagerSingleton").get();if((c("PolarisHoldoutChecks").H22023.rollout()===!1||c("justknobx")._("791")===!0)&&i.count()>0){var j=i.getViewInfo();i.clear();e(d("PolarisFeedActionInitFeed").initFeed({feedViewInfo:j,preloadedFeedQuery:a,preloadedFeedQueryId:g,preloadedStoryTrayQuery:b,preloadedStoryTrayQueryId:h,queryStore:f}))}else e(d("PolarisFeedActionInitFeed").initFeed({preloadedFeedQuery:a,preloadedFeedQueryId:g,preloadedStoryTrayQuery:b,preloadedStoryTrayQueryId:h,queryStore:f}))},[e,f,a,g,h,b])}g["default"]=a}),98);
__d("PolarisFeedActionInitFeedVariant",["PolarisDsaQEHelpers","PolarisFeedActionBuildFeedPageLoadedActionV2","PolarisFeedActionFetchFeedDataFromNative","PolarisInstajax","PolarisMonitorErrors","PolarisStoryAPIActions","Promise","asyncToGeneratorRuntime","polarisFeedReducer"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c,e){e=e();var f,g,i=e.feed.currentFeed,j=d("polarisFeedReducer").getFeedContent(e.feed),k=j.isLoadingPosts;j=j.paginationInfo;k||(c({type:"FEED_LOADING"}),f=d("PolarisFeedActionFetchFeedDataFromNative").fetchFeedDataFromNative({cursor:j==null?void 0:j.cursor,feedViewInfo:a,paginationSource:j==null?void 0:j.paginationSource}).then(function(a){return c(d("PolarisFeedActionBuildFeedPageLoadedActionV2").buildFeedPageLoadedActionV2(c,a,i))}));!e.stories.isLoading&&(i==="home"||i==="following")&&d("PolarisDsaQEHelpers").isDsaFeed()&&(g=d("PolarisStoryAPIActions").loadStoryTray(c,void 0,i).then(function(a){c(a)}));return(h||(h=b("Promise"))).all([f,g])["catch"](function(a){a instanceof d("PolarisInstajax").AjaxError||d("PolarisMonitorErrors").logError(a)})});return function(a,b){return c.apply(this,arguments)}}()}g.initFeedVariant=a}),98);
__d("usePolarisInitFeedVariantPage",["PolarisFeedActionInitFeedVariant","PolarisFeedLastHeadLoadContext","PolarisFeedSeenStateManagerSingleton","PolarisHoldoutChecks","PolarisReactRedux","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=d("PolarisReactRedux").useDispatch(),b=d("PolarisFeedLastHeadLoadContext").useSetLastHeadLoadMs();return i(function(){var e=c("PolarisFeedSeenStateManagerSingleton").get();if((c("PolarisHoldoutChecks").H22023.rollout()===!1||c("justknobx")._("791")===!0)&&e.count()>0){var f=e.getViewInfo();e.clear();a(d("PolarisFeedActionInitFeedVariant").initFeedVariant(f))}else a(d("PolarisFeedActionInitFeedVariant").initFeedVariant());b(Date.now())},[a,b])}g["default"]=a}),98);
__d("PolarisFeedRoot.react",["CometPlaceholder.react","PolarisConditionalPageLayoutHandler.react","PolarisFeedActionScrolledToTop","PolarisFeedPageContainerDeferred","PolarisFeedState","PolarisNavigationActions","PolarisReactRedux","polarisFeedSelectors","react","usePolarisCreationDialog.react","usePolarisCurrentFeedVariant","usePolarisDisplayProperties","usePolarisInitFeedPage","usePolarisInitFeedVariantPage","usePolarisPreloadedPostQuery","usePolarisRefreshFeedData","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef;function a(a){a=a.props;var b=a.routeParams,e=b.create_live,f=b.create_post;b=a.routeProps.polaris_preload;a=b.feed;var g=b.story_tray;b=b.suggested_user_list;var h=c("usePolarisCurrentFeedVariant")(),l=d("PolarisReactRedux").useSelector(d("polarisFeedSelectors").getFeedContent),m=l.currentState;l=l.isLoadingPosts;var n=c("useRoutePassthroughProps")(),o=k(!1),p=d("PolarisReactRedux").useDispatch(),q=m===d("PolarisFeedState").FEED_STATE_NETWORK||l,r=c("usePolarisInitFeedPage")(a,g);m=c("usePolarisPreloadedPostQuery")(b);var s=c("usePolarisInitFeedVariantPage")(),t=c("usePolarisRefreshFeedData")(),u=d("PolarisReactRedux").useSelector(function(a){return a.feed.content[h].items});l=c("usePolarisDisplayProperties")();a=l.viewportWidth;g=c("usePolarisCreationDialog.react")();var v=g[0];j(function(){(h==="home"||h==="past_posts")&&o.current===!1&&!q?(r(),o.current=!0):h!=="home"&&!q&&(!u||u.size===0)&&s()},[h,r,s,q,u]);j(function(){(n==null?void 0:n.refreshFeed)===!0&&(window.scrollTo(0,0),p(d("PolarisFeedActionScrolledToTop").scrolledToTop()),t())},[p,n==null?void 0:n.refreshFeed,t]);j(function(){f===!0?v({}):e===!0&&p(d("PolarisNavigationActions").openLiveCreationModal())},[p,f,e]);return i.jsx(c("PolarisConditionalPageLayoutHandler.react"),{children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(c("PolarisFeedPageContainerDeferred"),{suggestedUserListQueryRef:m,viewportWidth:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);